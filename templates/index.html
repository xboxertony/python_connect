<head>
    <script>
        var ws;
        function myFunction(){
            ws = new WebSocket(`ws://{window.location.host}/actions`);

            ws.onopen = function(){
                console.log("ok");
                document.getElementById("conn_status").style.display="flex";
                ws.send("socket open")
            };

            ws.onclose = function(evt){
                document.getElementById("conn_status").style.display="none";
            }

            ws.onmessage = function(evt){
                var para = document.createElement("p");
                para.style.display = "flex";
                para.innerHTML = ">"+evt.data;
                document.getElementById("chat").appendChild(para);
            }
        } 

        myFunction()

        function sendText(text){
            ws.send(text);
        }
    </script>
</head>
<body>
    <h1>這是一個與機器人聊天的網頁</h1>
    <p class="demo">跟聊天機器人溝通可以獲得妳想要的資訊</p>
    <div id="conn_status" style="display:none;">
        <span class="dot">
            <p>已連線</p>
        </span>
    </div>

    <input type="text" id="lname" name="lname"><br><br>
    <input type="submit" value="Submit" onclick="sendText(document.getElementById('lname').value)">

    <div id="chat"></div>
</body>